import os
import re

def remove_parentheses(sentence):
    # 정규 표현식을 사용하여 괄호 안의 내용을 제거
    return re.sub(r'\([^)]*\)', '', sentence)

file_path = "../test_dataset/gansin.txt"
name_directory_path = "gansin/"

if not os.path.exists(name_directory_path):
    os.makedirs(name_directory_path)

num=0

# 파일 열기 (읽기 모드: 'r')
with open(file_path, 'r', encoding='utf-8') as file:
    # 파일의 한 줄 읽어오기
    while True:
        line = file.readline()
        num = num+1
        print(num)
        # print(num)
        # 파일 끝에 도달하면 루프 종료
        if not line:
            break

        # 단문의 처음이 이름이라면 (5글자 안)
        if '\t' in line:
            character, dialogue = map(str.strip, line.split('\t', 1))
            c_name = character.strip()
            if len(c_name) >= 1:
                if '/' in line:
                    c_name = c_name.split('/')[0]
                name_path = os.path.join(name_directory_path, c_name)

            with open(name_path, 'a', encoding='utf-8') as name:
                dialogue = remove_parentheses(dialogue)
                name.write(f"{dialogue}\n")
